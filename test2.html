
<!DOCTYPE html> 
<html> 
<head> 
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
 	<title>Advanced GIS Toggle Tutorial Test</title>
    <style type="text/css"> 
        html { height: 100% }
        body { height: 100%; margin: 0px; padding: 0px }
        #map_canvas { height: 100% }
    </style> 
 
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
    <script type="text/javascript" src="http://yohman.bol.ucla.edu/jquery-1.5.2.min.js"></script> 
 
    <script type="text/javascript">    
        //declare namespace
        var yoh = {};
 
        //declare map
        var map;
		
        //declare layers
		var uclaCircle; 
		var UCLAParking;		
		var KMLtest; 
 
		function trace(message) 
		{ 
			if (typeof console != 'undefined') 
			{
				console.log(message);
			}
		}
 
		//toggle single layers on/off
		yoh.toggleLayer = function(layer,id) 
		{
			if ($('#'+id).is(':checked')) {
				layer.setMap(map);
			}
			else
			{
				layer.setMap(null);
			}
		}
		
        //Function that gets run when the document loads
        yoh.initialize = function()
        {
            var latlng = new google.maps.LatLng(34.070264, -118.4440562);
            var myOptions = {
                zoom: 13,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
 
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
			
			//draw circle example 
			var bufferOptions = {
				strokeColor: "#FF0000",
				strokeOpacity: 0.8,
				strokeWeight: 2,
				fillColor: "#FF0000",
				fillOpacity: 0.35,
				map: map,
				center: new google.maps.LatLng(34.070264, -118.4440562),
				radius: 2000
			};						
			uclaCircle = new google.maps.Circle(bufferOptions);
			
			//draw kml layer
			UCLAParking = new google.maps.KmlLayer('http://yohman.bol.ucla.edu/kml/UCLAParking.kmz?dummy=' + (new Date()).getTime(),{ preserveViewport: true });
			UCLAParking.setMap(map);
			
			//draw kml test layer
			KMLtest = new google.maps.KmlLayer('https://drive.google.com/uc?export=download&id=0B2gbIV1dXlvDTElVcE5pNnpaLU0' + (new Date()).getTime(),{ preserveViewport: true });
			KMLtest.setMap(map);
		}
</script> 
</head>
<body onload="yoh.initialize()"> 
 
    <!-- side panel div container --> 
    <div style="position:absolute; width:380px; height: 100%; overflow:auto; float:left; padding-left:10px; padding-right:10px;"> 
        <h1>Advanced GIS Toggle Tutorial</h1>     
        <br>
        <input id="uclaCircle_checkbox" type="checkbox" checked="checked" onClick="yoh.toggleLayer(uclaCircle,'uclaCircle_checkbox')" /> UCLA 2km buffer<br>
        <input id="UCLAParking_checkbox" type="checkbox" checked="checked" onClick="yoh.toggleLayer(UCLAParking,'UCLAParking_checkbox')" /> UCLA Parking
        <input id="KMLtest_checkbox" type="checkbox" checked="checked" onClick="yoh.toggleLayer(KMLtest,'KMLtest_checkbox')" /> KMLtest
    </div> 
    <!-- map div container --> 
    <div id="map_canvas" style="height:100%; margin-left:400px;"></div> 
 
</body> 
 
</html>
